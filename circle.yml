machine:

machine:
  timezone:
    America/New_York

  java:
    version: openjdk7

checkout:
  post:
    - git submodule sync
    - git submodule update --init

general:
  branches:
    only:
      - master # list of branches to build
      - /feature-.*/ # or regexes

dependencies:
  post:
    - wget https://saucelabs.com/downloads/sc-latest-linux.tar.gz
    - tar -xzf sc-latest-linux.tar.gz

test:
  override:
    - ./bin/sc -u fhumayun -k a523a3f558b9c725a6986a6214ac5ea7da06f234 -f ~/sc_ready:
        background: true
        pwd: sc-*-linux
    # Wait for tunnel to be ready
    - while [ ! -e ~/sc_ready ]; do sleep 1; done
    # Wait for app to be ready
    - curl --retry 10 --retry-delay 2 -v http://localhost:5000
    # Run selenium tests
    - nosetests